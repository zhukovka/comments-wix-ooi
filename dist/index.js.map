{"version":3,"sources":["index.js"],"names":["express","require","session","renderVM","app","use","secret","resave","saveUninitialized","req","res","visitCount","isMobile","html","send","listen","process","env","PORT","console","info"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,UAAUD,QAAQ,iBAAR,CAAhB;AACA,IAAME,WAAWF,QAAQ,MAAR,CAAjB;;AAEA,IAAMG,MAAMJ,SAAZ;;AAEA;AACAI,IAAIC,GAAJ,CACIH,QAAQ;AACNI,UAAQ,QADF;AAENC,UAAQ,IAFF;AAGNC,qBAAmB;AAHb,CAAR,CADJ;;AAQA;AACAJ,IAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACI,GAAD,EAAMC,GAAN,EAAc;AACzB,MAAI,CAACD,IAAIP,OAAJ,CAAYS,UAAjB,EAA6B;AAC3BF,QAAIP,OAAJ,CAAYU,QAAZ,GAAuB,IAAvB;AACD;;AAEDH,MAAIP,OAAJ,CAAYS,UAAZ;;AAEA,MAAME,OAAOV,SAAS;AACpBS,cAAUH,IAAIP,OAAJ,CAAYU;AADF,GAAT,CAAb;;AAIAF,MAAII,IAAJ,CAASD,IAAT;AACD,CAZD;;AAcA;AACAT,IAAIW,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAvB,EAA6B,YAAM;AACjCC,UAAQC,IAAR,qCAA+CJ,QAAQC,GAAR,CAAYC,IAA3D;AACD,CAFD","file":"index.js","sourcesContent":["const express = require('express');\nconst session = require('express-session');\nconst renderVM = require('./vm');\n\nconst app = express();\n\n// Register an express middleware. Learn more: http://expressjs.com/en/guide/using-middleware.html.\napp.use(\n    session({\n      secret: 'secret',\n      resave: true,\n      saveUninitialized: true,\n    }),\n);\n\n// Define a route to render our initial HTML.\napp.use('/', (req, res) => {\n  if (!req.session.visitCount) {\n    req.session.isMobile = true;\n  }\n\n  req.session.visitCount++;\n\n  const html = renderVM({\n    isMobile: req.session.isMobile,\n  });\n\n  res.send(html);\n});\n\n// Launch the server\napp.listen(process.env.PORT, () => {\n  console.info(`Fake server is running on port ${process.env.PORT}`);\n});\n"]}